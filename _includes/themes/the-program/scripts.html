<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/jquery-1.10.2.min.js"><\/script>')</script>

<!-- Jekyll Simple Search option -->
<script src="/assets/js/Simple-Jekyll-Search/jekyll-search.jquery.js"></script>
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : '{{ site.url }}/search.json',
          searchResults : '.search-results',
          template : '<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
     var bs = {
          close: $(".btn-close"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.btn-search')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>

{% if page.js_utils != null %}
    {% if page.js_utils contains "fancybox" %}
        <script src="/assets/js/fancybox/jquery.fancybox.pack.js?v=2.1.4"></script>
        <script src="/assets/js/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

        <script type="text/javascript">
            $("head").append('<link rel="stylesheet" href="/assets/js/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');
            $("head").append('<link rel="stylesheet" href="/assets/js/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');
            $(".post-image").fancybox({
                prevEffect      : 'none',
                nextEffect      : 'none',
                closeBtn        : true,
                helpers     : {
                    title   : { type : 'inside' },
                    buttons : {}
                }
            });
        </script>
    {% endif %}

    {% if page.js_utils contains "unveil" %}
        <script src="/assets/js/unveil/jquery.unveil.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $(".post-image > img").unveil(150);
            });
        </script>
    {% endif %}

    {% if page.js_utils contains "toc" %}
        <script type="text/javascript">
            function createListItem(heading) {
                var link = "#" + heading.children("a").attr("id");
                return "<li>" + "<a href='" + link + "'>" + heading.text() + "</a>" + "</li>";
            }

            var ToC = "<nav role='navigation' class='toc'><ol>";
            $("article h2").each(function () {
                var secondHeading, thirdHeadingInside;

                secondHeading = $(this);
                ToC += createListItem(secondHeading);

                thirdHeadingInside = secondHeading.nextUntil("article h2", "h3");
                if (thirdHeadingInside.length !== 0) {
                    ToC += "<ul>";
                    thirdHeadingInside.each(function () {
                        ToC += createListItem($(this));
                    });
                    ToC += "</ul>";
                }
            });
            ToC += "</ol>" + "</nav>";

            $("#toc").prepend(ToC);
        </script>
    {% endif %}

    {% if page.js_utils contains "toc" or page.js_utils contains "back-to-top" %}
        <script type="text/javascript">
            $(document).ready(function () {
                var offset = 220, duration = 500, width = 1080;
                $(window).scroll(function () {
                    if ($(window).width() > width) {
                        if ($(this).scrollTop() > offset) {
                            $('.back-to-top').fadeIn(duration);
                        } else {
                            $('.back-to-top').fadeOut(duration);
                        }
                    }
                });
                $(window).resize(function () {
                    if ($(window).width() < width) {
                        $('.back-to-top').fadeOut(duration);
                    }
                    if ($(window).width() >= width && $(this).scrollTop() > offset) {
                        $('.back-to-top').fadeIn(duration);
                    }
                });

                $('.back-to-top').click(function (event) {
                    event.preventDefault();
                    $('html, body').animate({scrollTop: 0}, duration);
                    return false;
                });
            });
        </script>
    {% endif %}
{% endif %}